{
    "name": "PublishToLiveMode",
    "properties": {
      "description": "Pipeline that publishes all changes from GitHub to Live Mode in ADF.",
      "parameters": {
        "subscriptionId": {
          "type": "String"
        },
        "resourceGroup": {
          "type": "String"
        },
        "adfName": {
          "type": "String"
        },
        "tenantId": {
          "type": "String"
        },
        "clientId": {
          "type": "String"
        },
        "clientSecret": {
          "type": "SecureString"
        }
      },
      "activities": [
        {
          "name": "TriggerPublish",
          "type": "WebActivity",
          "typeProperties": {
            "url": "https://management.azure.com/subscriptions/@{pipeline().parameters.subscriptionId}/resourceGroups/@{pipeline().parameters.resourceGroup}/providers/Microsoft.DataFactory/factories/@{pipeline().parameters.adfName}/publish?api-version=2018-06-01",
            "method": "POST",
            "headers": {
              "Content-Type": "application/json"
            },
            "authentication": {
                "type": "ServicePrincipal",
                "tenant": "@{pipeline().parameters.tenantId}",
                "servicePrincipalId": "@{pipeline().parameters.clientId}",
                "servicePrincipalKey": "@{pipeline().parameters.clientSecret}",
                "resource": "https://management.azure.com/"
              },
            "body": "{}"
          }
        }
      ]
    }
  }